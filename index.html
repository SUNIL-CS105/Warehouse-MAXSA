<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=0.9" />
  <title>MAXSA Warehouse Map with Login</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
  <style>
    body { font-family: Arial; background: #f5f5f5; margin:0; padding:1rem; }
    h2 { margin-top: 0; }
    .login-container { max-width: 400px; margin: auto; padding: 20px; background: #fff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
    .hidden { display: none; }
    input, button { width: 100%; margin: 5px 0; padding: 10px; font-size: 16px; }
    .logout-btn { position: fixed; top: 10px; right: 10px; background: red; color: white; border: none; padding: 8px 12px; cursor: pointer; }
  </style>
</head>
<body>

<div id="login" class="login-container">
  <h2>Login to Warehouse</h2>
  <input type="email" id="email" placeholder="Email" />
  <input type="password" id="password" placeholder="Password" />
  <button onclick="login()">Login</button>
</div>

<div id="app" class="hidden">
  <button class="logout-btn" onclick="logout()">Logout</button>
  <h2>MAXSA Warehouse Map</h2>
  <div class="grid-stack"></div>
  <div id="add-product-panel">
    <input type="text" id="new-item" placeholder="Item #" />
    <input type="number" id="new-q" placeholder="Quantity" min="1" />
    <button id="add-product-btn">âž• Add New Product</button>
  </div>
  <div id="inventory-summary-panel" title="Show total quantities of all products">
    ðŸ“Š Show Inventory Summary
    <div id="inventory-summary-output" style="display:none;"></div>
  </div>
</div>

<script>
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID",
    databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.database();

  function login() {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    auth.signInWithEmailAndPassword(email, password)
      .then(() => {
        document.getElementById('login').classList.add('hidden');
        document.getElementById('app').classList.remove('hidden');
        initWarehouse();
      })
      .catch(error => alert(error.message));
  }

  function logout() {
    auth.signOut().then(() => {
      document.getElementById('app').classList.add('hidden');
      document.getElementById('login').classList.remove('hidden');
    });
  }

  function initWarehouse() {
    // --- Constants for locations ---
    const CELL_WIDTH = 80;
    const CELL_HEIGHT = 50;

    const locations = {
      gridLabels: {
        rows: ['X','W','V','U','T','S','R','Q','P','O','N','M','L','K','J','I','H','G','F','E','D','C','B','A'],
        cols: 11
      },
      offices: {
        count: 30,
        startLeft: 980,
        startTop: 0,
        cols: 6,
        cellWidth: 80,
        cellHeight: 50
      },
      restroomsShelvesTemp: [
        { name: 'Restroom1', left: 980, top: 300 },
        { name: 'Restroom2', left: 1060, top: 300 },
        { name: 'Shelf1', left: 1220, top: 300 },
        { name: 'Shelf2', left: 1300, top: 300 },
        { name: 'Shelf3', left: 1380, top: 300 },
        { name: 'Shelf4', left: 1220, top: 350 },
        { name: 'Shelf5', left: 1300, top: 350 },
        { name: 'Shelf6', left: 1380, top: 350 },
        { name: 'New_#', left: 980, top: 500, width: 160, height: 80, color: '#FFFFFF' },
        { name: 'Temporary1', left: 980, top: 850 },
        { name: 'Temporary2', left: 980, top: 900 },
        { name: 'Temporary3', left: 980, top: 950 },
        { name: 'Temporary4', left: 980, top: 1000 },
        { name: 'Temporary5', left: 980, top: 1050 },
        { name: 'Temporary6', left: 980, top: 1100 },
        { name: 'Temporary7', left: 980, top: 1150 },
        { name: 'Temporary8', left: 1070, top: 850 },
        { name: 'Temporary9', left: 1070, top: 900 },
        { name: 'Temporary10', left: 1070, top: 950 },
        { name: 'Temporary11', left: 1070, top: 1000 },
        { name: 'Temporary12', left: 1070, top: 1050 },
        { name: 'Temporary13', left: 1070, top: 1100 },
        { name: 'Temporary14', left: 1070, top: 1150 }
      ],
      dropZones: [
        { id: "SHIPPED", name: "SHIPPED", left: 1300, top: 1100, width: 160, height: 80, color: '#e74c3c' },
        { id: "TO-8412-OFFICE", name: "TO 8412 OFFICE", left: 1300, top: 950, width: 160, height: 80, color: '#2980b9' }
      ]
    };

    let pallets = [];
    let palletsByLocation = {};

    function createGridLabels() {
      const container = document.querySelector('.grid-stack');
      const rows = locations.gridLabels.rows;
      for(let r = 0; r < rows.length; r++) {
        for(let c = 1; c <= locations.gridLabels.cols; c++) {
          const div = document.createElement('div');
          div.className = 'label-cell';
          div.style.left = `${c * CELL_WIDTH}px`;
          div.style.top = `${r * CELL_HEIGHT}px`;
          div.style.width = `${CELL_WIDTH}px`;
          div.style.height = `${CELL_HEIGHT}px`;
          div.innerText = `${rows[r]}${c}`;
          div.dataset.location = `${rows[r]}${c}`;
          container.appendChild(div);
        }
      }
      const off = locations.offices;
      for(let i = 1; i <= off.count; i++) {
        const col = i % off.cols;
        const row = Math.floor((i - 1) / off.cols);
        const div = document.createElement('div');
        div.className = 'label-cell office-zone';
        div.style.left = `${off.startLeft + col * off.cellWidth}px`;
        div.style.top = `${off.startTop + row * off.cellHeight}px`;
        div.style.width = `${off.cellWidth}px`;
        div.style.height = `${off.cellHeight}px`;
        div.innerText = `Office${i}`;
        div.dataset.location = `Office${i}`;
        container.appendChild(div);
      }
      locations.restroomsShelvesTemp.forEach(item => {
        const div = document.createElement('div');
        div.className = 'label-cell restroom-zone';
        div.style.left = `${item.left}px`;
        div.style.top = `${item.top}px`;
        div.style.width = `${CELL_WIDTH}px`;
        div.style.height = `${CELL_HEIGHT}px`;
        div.innerText = item.name;
        div.dataset.location = item.name;
        container.appendChild(div);
      });
      locations.dropZones.forEach(zone => {
        const div = document.createElement('div');
        div.className = 'label-cell drop-zone';
        div.id = zone.id;
        div.style.left = `${zone.left}px`;
        div.style.top = `${zone.top}px`;
        div.style.width = `${zone.width}px`;
        div.style.height = `${zone.height}px`;
        div.style.backgroundColor = zone.color;
        div.innerText = zone.name;
        div.dataset.location = zone.name;
        container.appendChild(div);
        makeDropZoneDroppable(div);
      });
    }

    function updateInventorySummary() {
      const summary = {};
      pallets.forEach(p => {
        if(p.location !== 'SHIPPED' && p.location !== 'TO 8412 OFFICE') {
          summary[p.itemId] = (summary[p.itemId] || 0) + p.quantity;
        }
      });
      const out = document.getElementById('inventory-summary-output');
      out.innerHTML = '';
      for(let key in summary) {
        out.innerHTML += `${key}: ${summary[key]}<br>`;
      }
    }
 // Initialize grid on page load
    createGridLabels();

    document.getElementById('add-product-btn').addEventListener('click', () => {
      const itemId = document.getElementById('new-item').value.trim();
      const q = parseInt(document.getElementById('new-q').value);
      if(!itemId || isNaN(q) || q < 1) {
        alert("Enter valid Item ID and Quantity");
        return;
      }
      // Add product logic goes here
      document.getElementById('new-item').value = '';
      document.getElementById('new-q').value = '';
    });

    document.getElementById('inventory-summary-panel').addEventListener('click', () => {
      updateInventorySummary();
      const output = document.getElementById('inventory-summary-output');
      output.style.display = output.style.display === 'none' ? 'block' : 'none';
    });
  }
</script>

</body>
</html>

  
